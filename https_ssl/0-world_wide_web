#!/usr/bin/env bash
# Displays the type and destination of subdomains for a given domain

# Function to display info about a subdomain
get_subdomain_info() {
    local domain=$1
    local subdomain=$2

    # Use dig to get the ANSWER SECTION and extract record type and IP
    local output
    output=$(dig $subdomain.$domain | awk '/ANSWER SECTION:/ {getline; print}')
    
    local record_type
    local ip
    record_type=$(echo $output | awk '{print $4}')
    ip=$(echo $output | awk '{print $5}')

    echo "The subdomain $subdomain is a $record_type record and points to $ip"
}

domain=$1
subdomain=$2

if [ -z "$subdomain" ]; then
    # If no subdomain provided, display default subdomains
    for sd in www lb-01 web-01 web-02; do
        get_subdomain_info $domain $sd
    done
else
    # Display info for the specific subdomain
    get_subdomain_info $domain $subdomain
fi
